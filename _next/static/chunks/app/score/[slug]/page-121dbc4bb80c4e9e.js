(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[589],{354:function(e,n,t){var r=t(5491).w_;e.exports.A=function(e){return r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"}},{tag:"polyline",attr:{points:"12 19 5 12 12 5"}}]})(e)}},7358:function(e,n,t){var r=t(5491).w_;e.exports.b=function(e){return r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"}}]})(e)}},2975:function(e,n,t){var r=t(5491).w_;e.exports.r=function(e){return r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"}}]})(e)}},7974:function(e,n,t){Promise.resolve().then(t.bind(t,1179))},1179:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return W}});var r=t(230),o=t(7437),i=t(802),a=t(6442),s=t(2265),c=t(4241),l=t(1510),d=t(3254),p=t(5431),u=t(3865),x=t(2399),m=t(218);function h(){let e=(0,r._)(["\n  display: flex;\n  flex-wrap: wrap;\n  // column-gap: 0.1em;\n  padding: 4px;\n  // background-color: #fff;\n  // border-bottom: 1px solid ",";\n  border-bottom: 1px solid #e4e8ec;\n  row-gap: 6px;\n  .letter {\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-end;\n    flex-basis: 1em;\n    width: 1em;\n    text-align: center;\n    flex-basis: ",";\n    width: ",";\n    .chord {\n      height: 1.5em;\n      white-space: nowrap;\n      button {\n        position: relative;\n        min-width: 100%;\n        font-weight: 500;\n        letter-spacing: -0.04em;\n        &:hover {\n          color: ",";\n        }\n      }\n    }\n    .lyrics {\n      height: 1.5em;\n    }\n    .index {\n      height: 1.5em;\n      white-space: nowrap;\n      font-size: 10px;\n      text-align: center;\n    }\n  }\n  @media "," {\n    padding: 3px;\n  }\n"]);return h=function(){return e},e}let f=i.default.div.withConfig({displayName:"Phrase__StyledScorePhrase",componentId:"sc-6bc3aab4-0"})(h(),u.v.primaryLine,e=>"".concat(e.$letterSpacing,"em")||0,e=>"".concat(e.$letterSpacing,"em")||0,u.v.hoverText,c.Uh.mobile);var g=function(e){let{phrase:n,letterSpacing:t}=e,r=(0,m.C)(e=>e.score),i=n.chordList||[],[a,c]=(0,s.useState)(""),[l,u]=(0,s.useState)(0),[h,g]=(0,s.useState)([]),y=(e,n)=>{c(e),u(n||0)},v=e=>{if(!e)return"";if(e.includes("/")){let n=e.split("/"),t=(0,x.yj)(n[0]),o=(0,x.yj)(n[1]),i=(0,x.Es)(t,-1*r.capo+r.computedKey),a=(0,x.Es)(o,-1*r.capo+r.computedKey);return e.replace(t,i).replace(o,a)}{let n=(0,x.yj)(e),t=(0,x.Es)(n,-1*r.capo+r.computedKey);return e.replace(n,t)}};return(0,s.useEffect)(()=>{var e;let t=[],r=(null===(e=n.lyrics)||void 0===e?void 0:e.split(""))||[],o=r.length,a=Math.max(...i.map(e=>e.position));for(let e=0;e<Math.max(o,a+1);e++){let n=i.find(n=>n.position===e);t.push({lyricsLetter:r[e],chordName:v(null==n?void 0:n.name),initIndex:(null==n?void 0:n.initIndex)||0})}g(t)},[r.capo]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f,{className:"score-phrase",$letterSpacing:t,children:h.map((e,n)=>(0,o.jsxs)("div",{className:"letter","data-letter-index":n,children:[(0,o.jsx)("div",{className:"chord",children:e.chordName&&(0,o.jsx)("button",{type:"button",onClick:()=>y(e.chordName,e.initIndex),children:(0,o.jsx)(d.Z,{chordName:e.chordName,isAbbr:!0})},n)}),(0,o.jsx)("div",{className:"lyrics",children:e.lyricsLetter}),!1]},n))}),a&&(0,o.jsx)(p.Z,{chordName:a,closeChord:()=>{c(""),u(0)},initIndex:l})]})};function y(){let e=(0,r._)(["\n  display: grid;\n  row-gap: 30px;\n  font-size: 14px;\n  .notice {\n    margin-bottom: 0 !important;\n    font-size: 14px;\n    color: #f00;\n  }\n  .letter {\n    flex-basis: ",";\n    width: ",";\n  }\n  @media "," {\n    font-size: 12px;\n  }\n"]);return y=function(){return e},e}let v=i.default.article.withConfig({displayName:"Wrapper__StyledScoreWrapper",componentId:"sc-7aea6d9e-0"})(y(),e=>"".concat(e.$letterSpacing,"em")||0,e=>"".concat(e.$letterSpacing,"em")||0,c.Uh.mobile);var j=function(e){let{children:n,letterSpacing:t}=e;return(0,o.jsxs)(v,{$letterSpacing:t,children:[(0,o.jsx)("p",{className:"notice",children:"※ 코드를 클릭하면 코드표가 나옵니다."}),n]})},b=t(765),k=t(2975),w=t(7358),N=t(1396),C=t.n(N),S=t(354),_=t(5523);function I(){let e=(0,r._)(["\n  .score-header {\n    text-align: center;\n    margin-bottom: 60px;\n    .score-title {\n      font-weight: 700;\n      font-size: 30px;\n      margin-bottom: 12px;\n    }\n    .score-categories {\n      display: flex;\n      flex-wrap: wrap;\n      justify-content: center;\n      gap: 12px;\n    }\n    .score-date {\n      margin-top: 12px;\n      color: #666;\n      font-size: 14px;\n    }\n    .score-meta {\n      margin-top: 30px;\n      display: flex;\n      justify-content: space-between;\n      font-size: 14px;\n      .score-capo {\n        display: flex;\n        align-items: center;\n        column-gap: 12px;\n        .controller {\n          display: flex;\n          align-items: center;\n          column-gap: 6px;\n          button {\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            width: 24px;\n            height: 24px;\n            background-color: ",";\n            border: 1px solid ",";\n            &:hover {\n              background-color: ",";\n              background-color: ",";\n            }\n          }\n        }\n      }\n    }\n  }\n  .score-navigation {\n    margin-top: 30px;\n  }\n  .back-link {\n    &:first-child {\n      margin-bottom: 30px;\n    }\n    &:last-child {\n      margin-top: 60px;\n    }\n    a {\n      display: inline-flex;\n      align-items: center;\n      column-gap: 4px;\n      &:hover {\n        color: ",";\n        text-decoration: underline;\n        svg {\n          transform: translateX(-3px);\n        }\n      }\n    }\n  }\n  @media "," {\n    .score-header {\n      .score-title {\n        font-size: 24px;\n      }\n      .score-date {\n        font-size: 12px;\n      }\n      .score-categories {\n        gap: 8px;\n      }\n      .score-meta {\n        font-size: 12px;\n      }\n    }\n    .back-link {\n      &:first-child {\n        margin-bottom: 12px;\n      }\n      &:last-child {\n        margin-top: 48px;\n      }\n    }\n  }\n"]);return I=function(){return e},e}let L=i.default.div.withConfig({displayName:"Viewer__StyledScoreViewer",componentId:"sc-3c71fafe-0"})(I(),u.v.primaryBg,u.v.primaryLine,u.v.secondaryBg,u.v.secondaryLine,u.v.hoverText,c.Uh.mobile);var W=function(e){let{scoreData:n}=e,[t,r]=(0,s.useState)([]),[i,c]=(0,s.useState)(!1),[d,p]=(0,s.useState)(0),u=(0,s.useRef)(null),x=(0,m.C)(e=>e.score),h=(0,m.T)(),f=n.computedKey||0,y=e=>{let n=x.capo+e;n>=-8&&n<=8&&h(b.IW.setCapo(n))};return(0,s.useEffect)(()=>{var e;let n=null===(e=u.current)||void 0===e?void 0:e.getElementsByTagName("img"),t=Array.from(n||[]),o=t.map((e,n)=>(e.addEventListener("click",()=>{p(n),c(!0)}),{key:n,src:e.src}));r(o)},[]),(0,s.useEffect)(()=>(h(b.IW.setCapo(n.capo)),h(b.IW.setComputedKey(f)),()=>{h(b.IW.setCapo(0)),h(b.IW.setComputedKey(0))}),[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(L,{children:[(0,o.jsx)("div",{className:"back-link",children:(0,o.jsxs)(C(),{href:"/score",children:[(0,o.jsx)(S.A,{}),"목록으로"]})}),(0,o.jsxs)("header",{className:"score-header",children:[(0,o.jsx)("h1",{className:"score-title",children:n.title}),(0,o.jsx)("div",{className:"score-date",children:n.releaseYear}),(0,o.jsxs)("div",{className:"score-meta",children:[(0,o.jsxs)("div",{className:"score-capo",children:["Capo : ",x.capo,(0,o.jsxs)("div",{className:"controller",children:[(0,o.jsx)("button",{type:"button",onClick:()=>y(-1),children:(0,o.jsx)(w.b,{})}),(0,o.jsx)("button",{type:"button",onClick:()=>y(1),children:(0,o.jsx)(k.r,{})})]})]}),(0,o.jsx)("div",{className:"score-artist",children:n.artist})]})]}),(0,o.jsx)("div",{className:"score-content",ref:u,children:(0,o.jsx)(_.Z,{children:(0,o.jsx)(a.R,{...n.mdx,components:{ScoreWrapper:j,ScorePhrase:g}})})}),(0,o.jsx)("div",{className:"back-link",children:(0,o.jsxs)(C(),{href:"/score",children:[(0,o.jsx)(S.A,{}),"목록으로"]})})]}),i&&(0,o.jsx)(l.Z,{images:t,initActiveIndex:d,closeGallery:()=>{c(!1)}})]})}},765:function(e,n,t){"use strict";t.d(n,{IW:function(){return i}});var r=t(663);let o=(0,r.oM)({name:"score",initialState:{capo:0,computedKey:0},reducers:{setCapo:(e,n)=>({...e,capo:n.payload}),setComputedKey:(e,n)=>({...e,computedKey:n.payload})}}),i=o.actions;n.ZP=o.reducer}},function(e){e.O(0,[576,396,198,173,71,355,386,971,596,744],function(){return e(e.s=7974)}),_N_E=e.O()}]);