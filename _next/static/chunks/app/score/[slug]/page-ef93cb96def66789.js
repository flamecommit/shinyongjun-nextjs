(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[589],{354:function(n,e,t){var r=t(5491).w_;n.exports.A=function(n){return r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"}},{tag:"polyline",attr:{points:"12 19 5 12 12 5"}}]})(n)}},7358:function(n,e,t){var r=t(5491).w_;n.exports.b=function(n){return r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"}}]})(n)}},2975:function(n,e,t){var r=t(5491).w_;n.exports.r=function(n){return r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"}}]})(n)}},3277:function(n,e,t){Promise.resolve().then(t.bind(t,1179))},1179:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return W}});var r=t(230),i=t(7437),o=t(802),s=t(6442),c=t(2265),a=t(7735),l=t(6206),d=t(4241),p=t(1510),x=t(3254),m=t(5431),u=t(3865),h=t(2399),f=t(218);function g(){let n=(0,r._)(["\n  display: flex;\n  flex-wrap: wrap;\n  // column-gap: 0.1em;\n  padding: 4px;\n  // background-color: #fff;\n  // border-bottom: 1px solid ",";\n  border-bottom: 1px solid #e4e8ec;\n  row-gap: 6px;\n  .letter {\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-end;\n    flex-basis: 1em;\n    width: 1em;\n    text-align: center;\n    flex-basis: ",";\n    width: ",";\n    .chord {\n      height: 1.5em;\n      white-space: nowrap;\n      button {\n        position: relative;\n        min-width: 100%;\n        font-weight: 500;\n        letter-spacing: -0.04em;\n        &:hover {\n          color: ",";\n        }\n      }\n    }\n    .lyrics {\n      height: 1.5em;\n    }\n    .index {\n      height: 1.5em;\n      white-space: nowrap;\n      font-size: 10px;\n      text-align: center;\n    }\n  }\n  @media "," {\n    padding: 3px;\n  }\n"]);return g=function(){return n},n}let y=o.ZP.div.withConfig({displayName:"Phrase__StyledScorePhrase",componentId:"sc-6bc3aab4-0"})(g(),u.v.primaryLine,n=>"".concat(n.$letterSpacing,"em")||0,n=>"".concat(n.$letterSpacing,"em")||0,u.v.hoverText,d.Uh.mobile);var v=function(n){let{phrase:e,letterSpacing:t}=n,r=(0,f.C)(n=>n.score),o=e.chordList||[],[s,a]=(0,c.useState)(""),[l,d]=(0,c.useState)(0),[p,u]=(0,c.useState)([]),g=(n,e)=>{a(n),d(e||0)},v=n=>{if(!n)return"";if(n.includes("/")){let e=n.split("/"),t=(0,h.yj)(e[0]),i=(0,h.yj)(e[1]),o=(0,h.Es)(t,-1*r.capo+r.computedKey),s=(0,h.Es)(i,-1*r.capo+r.computedKey);return n.replace(t,o).replace(i,s)}{let e=(0,h.yj)(n),t=(0,h.Es)(e,-1*r.capo+r.computedKey);return n.replace(e,t)}};return(0,c.useEffect)(()=>{var n;let t=[],r=(null===(n=e.lyrics)||void 0===n?void 0:n.split(""))||[],i=r.length,s=Math.max(...o.map(n=>n.position));for(let n=0;n<Math.max(i,s+1);n++){let e=o.find(e=>e.position===n);t.push({lyricsLetter:r[n],chordName:v(null==e?void 0:e.name),initIndex:(null==e?void 0:e.initIndex)||0})}u(t)},[r.capo]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y,{className:"score-phrase",$letterSpacing:t,children:p.map((n,e)=>(0,i.jsxs)("div",{className:"letter","data-letter-index":e,children:[(0,i.jsx)("div",{className:"chord",children:n.chordName&&(0,i.jsx)("button",{type:"button",onClick:()=>g(n.chordName,n.initIndex),children:(0,i.jsx)(x.Z,{chordName:n.chordName,isAbbr:!0})},e)}),(0,i.jsx)("div",{className:"lyrics",children:n.lyricsLetter}),!1]},e))}),s&&(0,i.jsx)(m.Z,{chordName:s,closeChord:()=>{a(""),d(0)},initIndex:l})]})};function b(){let n=(0,r._)(["\n  display: grid;\n  row-gap: 30px;\n  font-size: 14px;\n  .notice {\n    margin-bottom: 0 !important;\n    font-size: 14px;\n    color: #f00;\n  }\n  .letter {\n    flex-basis: ",";\n    width: ",";\n  }\n  @media "," {\n    font-size: 12px;\n  }\n"]);return b=function(){return n},n}let j=o.ZP.article.withConfig({displayName:"Wrapper__StyledScoreWrapper",componentId:"sc-7aea6d9e-0"})(b(),n=>"".concat(n.$letterSpacing,"em")||0,n=>"".concat(n.$letterSpacing,"em")||0,d.Uh.mobile);var k=function(n){let{children:e,letterSpacing:t}=n;return(0,i.jsxs)(j,{$letterSpacing:t,children:[(0,i.jsx)("p",{className:"notice",children:"※ 코드를 클릭하면 코드표가 나옵니다."}),e]})},w=t(765),N=t(2975),C=t(7358),S=t(1396),_=t.n(S),z=t(354);function I(){let n=(0,r._)(["\n  .score-header {\n    text-align: center;\n    margin-bottom: 60px;\n    .score-title {\n      font-weight: 700;\n      font-size: 30px;\n      margin-bottom: 12px;\n    }\n    .score-categories {\n      display: flex;\n      flex-wrap: wrap;\n      justify-content: center;\n      gap: 12px;\n    }\n    .score-date {\n      margin-top: 12px;\n      color: #666;\n      font-size: 14px;\n    }\n    .score-meta {\n      margin-top: 30px;\n      display: flex;\n      justify-content: space-between;\n      font-size: 14px;\n      .score-capo {\n        display: flex;\n        align-items: center;\n        column-gap: 12px;\n        .controller {\n          display: flex;\n          align-items: center;\n          column-gap: 6px;\n          button {\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            width: 24px;\n            height: 24px;\n            background-color: ",";\n            border: 1px solid ",";\n            &:hover {\n              background-color: ",";\n              background-color: ",";\n            }\n          }\n        }\n      }\n    }\n  }\n  .score-content {\n    ","\n    ","\n    img {\n      display: block;\n      cursor: pointer;\n      margin-inline: auto;\n    }\n    .image-cite {\n      display: block;\n      text-align: center;\n      margin-top: 6px;\n      color: #666;\n      font-size: 12px;\n    }\n    code {\n      display: inline-block;\n      font-size: 14px;\n      line-height: 24px;\n      padding-block: 0;\n    }\n    ol {\n      list-style: decimal;\n    }\n    li {\n      list-style: disc;\n    }\n  }\n  .score-navigation {\n    margin-top: 30px;\n  }\n  .back-link {\n    &:first-child {\n      margin-bottom: 30px;\n    }\n    &:last-child {\n      margin-top: 60px;\n    }\n    a {\n      display: inline-flex;\n      align-items: center;\n      column-gap: 4px;\n      &:hover {\n        color: ",";\n        text-decoration: underline;\n        svg {\n          transform: translateX(-3px);\n        }\n      }\n    }\n  }\n  @media "," {\n    .score-header {\n      .score-title {\n        font-size: 24px;\n      }\n      .score-date {\n        font-size: 12px;\n      }\n      .score-categories {\n        gap: 8px;\n      }\n      .score-meta {\n        font-size: 12px;\n      }\n    }\n    .score-content {\n      font-size: 14px;\n      code {\n        font-size: 12px;\n        line-height: 21px;\n      }\n    }\n    .back-link {\n      &:first-child {\n        margin-bottom: 12px;\n      }\n      &:last-child {\n        margin-top: 48px;\n      }\n    }\n  }\n"]);return I=function(){return n},n}let L=o.ZP.div.withConfig({displayName:"Viewer__StyledScoreViewer",componentId:"sc-ea583b2d-0"})(I(),u.v.primaryBg,u.v.primaryLine,u.v.secondaryBg,u.v.secondaryLine,l.J,a.M,u.v.hoverText,d.Uh.mobile);var W=function(n){let{scoreData:e}=n,[t,r]=(0,c.useState)([]),[o,a]=(0,c.useState)(!1),[l,d]=(0,c.useState)(0),x=(0,c.useRef)(null),m=(0,f.C)(n=>n.score),u=(0,f.T)(),h=e.computedKey||0,g=n=>{let e=m.capo+n;e>=-8&&e<=8&&u(w.IW.setCapo(e))};return(0,c.useEffect)(()=>{var n;let e=null===(n=x.current)||void 0===n?void 0:n.getElementsByTagName("img"),t=Array.from(e||[]),i=t.map((n,e)=>(n.addEventListener("click",()=>{d(e),a(!0)}),{key:e,src:n.src}));r(i)},[]),(0,c.useEffect)(()=>(u(w.IW.setCapo(e.capo)),u(w.IW.setComputedKey(h)),()=>{u(w.IW.setCapo(0)),u(w.IW.setComputedKey(0))}),[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(L,{children:[(0,i.jsx)("div",{className:"back-link",children:(0,i.jsxs)(_(),{href:"/score",children:[(0,i.jsx)(z.A,{}),"목록으로"]})}),(0,i.jsxs)("header",{className:"score-header",children:[(0,i.jsx)("h1",{className:"score-title",children:e.title}),(0,i.jsx)("div",{className:"score-date",children:e.releaseYear}),(0,i.jsxs)("div",{className:"score-meta",children:[(0,i.jsxs)("div",{className:"score-capo",children:["Capo : ",m.capo,(0,i.jsxs)("div",{className:"controller",children:[(0,i.jsx)("button",{type:"button",onClick:()=>g(-1),children:(0,i.jsx)(C.b,{})}),(0,i.jsx)("button",{type:"button",onClick:()=>g(1),children:(0,i.jsx)(N.r,{})})]})]}),(0,i.jsx)("div",{className:"score-artist",children:e.artist})]})]}),(0,i.jsx)("div",{className:"score-content",ref:x,children:(0,i.jsx)(s.R,{...e.mdx,components:{ScoreWrapper:k,ScorePhrase:v}})}),(0,i.jsx)("div",{className:"back-link",children:(0,i.jsxs)(_(),{href:"/score",children:[(0,i.jsx)(z.A,{}),"목록으로"]})})]}),o&&(0,i.jsx)(p.Z,{images:t,initActiveIndex:l,closeGallery:()=>{a(!1)}})]})}},765:function(n,e,t){"use strict";t.d(e,{IW:function(){return o}});var r=t(663);let i=(0,r.oM)({name:"score",initialState:{capo:0,computedKey:0},reducers:{setCapo:(n,e)=>({...n,capo:e.payload}),setComputedKey:(n,e)=>({...n,computedKey:e.payload})}}),o=i.actions;e.ZP=i.reducer}},function(n){n.O(0,[27,576,396,198,71,783,355,447,971,596,744],function(){return n(n.s=3277)}),_N_E=n.O()}]);